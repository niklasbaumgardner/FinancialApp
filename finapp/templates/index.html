{% extends "base.html" %}

{% block title %}Home{% endblock title %}
{% block home %}w3-text-blue{% endblock home %}



{% block content %}
<script>
    function delete_budget(budget_id, name, url) {
        // document.getElementById('delete_button').href = url;

        document.getElementById(budget_id).style.display = 'block';
    }
</script>


    <div class="w3-cell-row w3-padding-32">
        <div class="w3-container">
            <br><br><br><br>
            <h1>Welcome</h1>
            <p>Your total of all budgets is {{ total }}</p>
        </div>
        
    </div>


    <div class="w3-cell-row w3-padding-32 content">
        <div class="w3-container w3-cell" style="width:15%"></div>
        <div class="w3-container w3-round-small">
            {% if budgets %}
                {% for budget in budgets %}
                    <div class="w3-light-grey">
                        <a href="{{ url_for('home.view_budget', id=budget.id) }}" style="text-decoration: none;">
                            <div class="w3-container w3-center">
                                <h3 class="w3-text-blue">{{ budget.name }} Budget</h3>
                                <h5 class="w3-text-red">{{ round(budget.total, 2) }}</h5>
                            </div>
                        </a>
                        <button onclick="delete_budget('id{{ budget.id }}', '{{ budget.name }}', 'url')">Delete {{ budget.name }} Budget?</button>
                        
                        
                    </div>
                    <br><br><br>

                    <div id="id{{ budget.id }}" class="w3-modal" style="display: none;">
                        <div class="w3-modal-content">
                            <form method="POST" action="{{ url_for('home.delete_budget', b_id=budget.id) }}">
                                <div class="w3-container">
                                    <h2>Delete {{ budget.name }} budget?</h2>
                                    <fieldset class="w3-center">
                                        <h6 class="w3-left">Delete this budgets transactions:</h6><br><br>
                                        <input class="w3-left" type="radio" id="delete" name="new_budget" value="None">
                                        <label class="w3-left" for="delete">&nbsp;Delete Transations</label><br>
                                        <h6 class="w3-left">Or transfer transactions to another budget:</h6><br><br>
                                        {% for budg in budgets %}
                                            {% if budget.id != budg.id %}
                                                <input class="w3-left" type="radio" id="{{ budg.name }}" name="new_budget" value="{{ budg.id }}">
                                                <label class="w3-left" for="{{ budg.name }}">&nbsp;{{ budg.name }}</label><br>
                                            {% endif %}
                                        {% endfor %}
                                    </fieldset>
                                    <br>
                                    <span onclick="document.getElementById('id{{ budget.id }}').style.display='none'" class="w3-button w3-display-topright">&times;</span>
                                    <div class="w3-cell-row">
                                        <button type="submit" id="delete_button" class="w3-button w3-red w3-round-small">Delete</button>&nbsp;
                                        <a onclick="document.getElementById('id{{ budget.id }}').style.display='none'" class="w3-button w3-light-grey w3-round-small">Cancel</a>
                                    </div>
                                    <br>
                                </div>
                            </form>
                        </div>
                    </div>

                {% endfor %}
            {% else %}
                    <h4>No budgets! Click <a href="{{ url_for('home.add_budget') }}">HERE</a> to add a budget.</h4>
            {% endif %}
        </div>
        <div class="w3-container w3-cell" style="width:15%"></div>
    </div>

    

{% endblock content %}s